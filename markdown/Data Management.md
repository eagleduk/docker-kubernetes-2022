# Data Management

| 앱 데이터                                                             | 임시 저장 데이터                                                  | 영구 저장 데이터                            |
| --------------------------------------------------------------------- | ----------------------------------------------------------------- | ------------------------------------------- |
| 이미지를 만들 때 사용데는 데이터                                      | 메모리에 저장, 휘발성 데이터                                      | 앱에서 사용되는 파일 및 데이터베이스 데이터 |
| 이미지는 읽기 전용이라 데이터를 변경할 시 이미지를 새로 만들어야 한다 | 읽기, 쓰기가 가능하지만 휘발성 데이터라 저장할 필요가 없는 데이터 | 앱에서 사용되는 정보 데이터                 |

## Volume

- 영구적으로 데이터를 저장하기 위한 docker 의 개념
- 호스트 머신의 폴더와 컨테이너내의 폴더를 동기화
- 단, 실제 호스트 머신에서의 위치를 특정 지을 수 없다.

| 익명 볼륨                                                                                   | 명명 볼륨                                                                                           |
| ------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- |
| Dockerfile 에서 컨테이너에서 볼륨으로 사용할 위치를 설정                                    | 컨네이너를 실행할 때 볼륨으로 사용할 위치 설정                                                      |
| 휘발성 볼륨으로 컨테이너가 실행되면 볼륨이 생성되지만, 컨테이너가 종료되면 볼륨도 삭제된다. | 볼륨을 사용할 이름과 위치를 지정하고, 해당 볼륨은 사라지지 않고 어느 컨네이너에서나 사용할 수 있다. |

- 컨네이너를 실행시 **-v** 옵션을 사용하여 익명/명명 볼륨을 선언할 수 있다.
  - -v [컨테이너 위치] → 익명 볼륨
  - -v [볼륨 이름]:[컨테이너 위치] → 명명 볼륨

## Bind Mount

- 호스트 머신상에 매핑될 컨테이너 경로 설정
- 이미지가 소스코드를 스냅샷에 넣고 + 컨테이너에서 호스트 머신과 동기화
- 컨테이너가 항상 최신의 호스트 상태를 유지한다.
- 영구적이고 편집 가능한 데이터에 적합
- docker가 마운트 하고자 하는 호스트 머신의 폴더에 엑세스가 가능해야 한다.
- 마운트를 하면 호스트 머신에서 컨테이너로 폴더가 덮어쓰여지기 때문에 개발중에 필요한 종속성(예, **node_modules**) 등이 삭제될 수 있다.
- 개발시 필요한 필수 파일(폴더)등을 익명볼륨으로 호스트 머신에 내보내고 마운트를 하면 종속성 유지 및 호스트파일 동기화를 동시에 유지할 수 있다.
- Window OS 에서는 nodemon 같은 소스코드가 변경되었을 때 서버를 재시작 해야 하는 경우에는 정상적으로 동작하지 않는다. Front-End 파일 변경은 실시간으로 파일을 읽어 드리기 때문에, 서버를 재시작 하는 경우는 없지만 Back-End 파일 변경은 서버를 재시작 해야 적용이 된다.
  - Window 에서는 nodemon 스크립트 실행히 -L 옵션을 추가해 주어야 한다. [[참조]](https://github.com/remy/nodemon#application-isnt-restarting)
