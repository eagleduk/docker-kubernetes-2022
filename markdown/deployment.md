# deployment

- 도커와 컨테이너를 사용할 때 원치 않는 돌발상황을 직면하지 않도록 보장
- 컨테이너 로컬머신에서 작동하는 것은 리모트 머신에 배포후에도 작동한다.

## 로컬 이미지 배포 방법

1. 프로젝트 폴더의 모든 항목 복사 - 이미지를 리모트 호스트에서 생성
2. 로컬 머신에서 생성된 이미지를 배포 - Docker Hub pull/push 이용

## 주의점

1. 컨테이너를 로컬머신에서 최종 제품으로 만들 때 바인드 마운트를 사용하면 안된다.

   > 개발 환경에서 코드의 변경사항이 바로 반영되는 바운드 마운트는 편리하지만 최종 배포 이미지에는 변경 사항이 적용될리 없고 안정성을 위해 `COPY` 명령으로 현 코드 상태를 스냅샷(복제)하는 방법이 최선.

2. 컨테이너화된 앱의 개발 및 최종 제품생산을 위해 다른 설정 필요
3. Docker compose 를 사용하여 여러개의 컨테이너를 테스트할 수 있지만, 배포를 위해 다중 서버 또는 다중 호스트 머신에 걸쳐 분할 고려
4. 리모트 머신에 모든 것을 설정하는 경우에는 안전한지 등을 보장해야 하는 책임이 있다.

   > 전체를 관리해주는 관리형 서비스( AWS-ECS ) 사용으로 해당 책임을 줄일 수 있다.

### 1단계

[AWS EC2](deployment%201fe63a39153f4ef5adf60c30a7044e20/AWS%20EC2%20712685734209483faaff1b013a2917b2.md)

- 리모트 시스템 설정
- 리모트 호스팅 서버
- SSH로 리모트 호스트 서버 연결
- 리모트 호스트에 Docker 설치
- 이미지 올리기와 다운로드
- 컨테이너 실행 및 테스트
- 로컬 머신의 코드가 업데이트시 이미지 재 생성 및 올리기
